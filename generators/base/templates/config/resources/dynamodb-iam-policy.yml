Resources:
  DynamoDBIamPolicy:
    Type: 'AWS::IAM::Policy'
    DependsOn:
      - DefaultsTable
    Properties:
      PolicyName: lambda-dynamodb
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Action:
              - 'dynamodb:DescribeTable'
              - 'dynamodb:Query'
              - 'dynamodb:Scan'
              - 'dynamodb:GetItem'
              - 'dynamodb:PutItem'
              - 'dynamodb:UpdateItem'
              - 'dynamodb:DeleteItem'
            Resource:
              - 'Fn::GetAtt': DefaultsTable.Arn
      Roles:
        - Ref: IamRoleLambdaExecution
